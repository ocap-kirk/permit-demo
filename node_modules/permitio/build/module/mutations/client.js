import axios from 'axios';
export class ReadOperation {
    constructor(callback) {
        this.callback = callback;
    }
    async run() {
        return await this.callback();
    }
}
export class WriteOperation {
    constructor(callback) {
        this.callback = callback;
    }
    async run() {
        return await this.callback();
    }
}
export class MutationsClient {
    constructor(config, logger) {
        this.config = config;
        this.logger = logger;
        this.client = axios.create();
        this.client = axios.create({
            baseURL: `${this.config.pdpURL}/`,
            headers: {
                Authorization: `Bearer ${this.config.token}`,
                'Content-Type': 'application/json',
            },
        });
    }
    // read api -----------------------------------------------------------------
    getUser(userKey) {
        return new ReadOperation(async () => {
            this.logger.info(`permit.api.getUser(${userKey})`);
            return this.client
                .get(`cloud/users/${userKey}`)
                .then((response) => {
                return response.data;
            })
                .catch((error) => {
                this.logger.error(`tried to get user with key: ${userKey}, got error: ${error}`);
                throw error;
            });
        });
    }
    getRole(roleKey) {
        return new ReadOperation(async () => {
            this.logger.info(`permit.api.getRole(${roleKey})`);
            return this.client
                .get(`cloud/roles/${roleKey}`)
                .then((response) => {
                return response.data;
            })
                .catch((error) => {
                this.logger.error(`tried to get role with id: ${roleKey}, got error: ${error}`);
                throw error;
            });
        });
    }
    getTenant(tenantKey) {
        return new ReadOperation(async () => {
            this.logger.info(`permit.api.getTenant(${tenantKey})`);
            return this.client
                .get(`cloud/tenants/${tenantKey}`)
                .then((response) => {
                return response.data;
            })
                .catch((error) => {
                this.logger.error(`tried to get tenant with id: ${tenantKey}, got error: ${error}`);
                throw error;
            });
        });
    }
    // either in one tenant or in all tenants
    // TODO: fix schema
    getAssignedRoles(userKey, tenantKey) {
        return new ReadOperation(async () => {
            this.logger.info(`permit.api.getAssignedRoles(user=${userKey}, tenant=${tenantKey})`);
            let url = `cloud/role_assignments?user=${userKey}`;
            if (tenantKey !== undefined) {
                url += `&tenant=${tenantKey}`;
            }
            return await this.client
                .get(url)
                .then((response) => {
                return response.data;
            })
                .catch((error) => {
                this.logger.error(`could not get user roles for user ${userKey}, got error: ${error}`);
                throw error;
            });
        });
    }
    // write api ----------------------------------------------------------------
    // user mutations
    syncUser(user) {
        return new WriteOperation(async () => {
            this.logger.info(`permit.api.syncUser(${JSON.stringify(user)})`);
            return await this.client
                .put('cloud/users', user)
                .then((response) => {
                return response.data;
            })
                .catch((error) => {
                this.logger.error(`tried to sync user with key: ${user.key}, got error: ${error}`);
                throw error;
            });
        });
    }
    deleteUser(userKey) {
        return new WriteOperation(async () => {
            this.logger.info(`permit.api.deleteUser(${userKey})`);
            return await this.client
                .delete(`cloud/users/${userKey}`)
                .then((response) => {
                return { status: response.status };
            })
                .catch((error) => {
                this.logger.error(`tried to delete user with key: ${userKey}, got error: ${error}`);
                throw error;
            });
        });
    }
    // tenant mutations
    createTenant(tenant) {
        return new WriteOperation(async () => {
            this.logger.info(`permit.api.createTenant(${JSON.stringify(tenant)})`);
            const data = {};
            data.externalId = tenant.key;
            data.name = tenant.name;
            if (tenant.description) {
                data.description = tenant.description;
            }
            return await this.client
                .put('cloud/tenants', data)
                .then((response) => {
                return response.data;
            })
                .catch((error) => {
                this.logger.error(`tried to create tenant with key: ${tenant.key}, got error: ${error}`);
                throw error;
            });
        });
    }
    updateTenant(tenant) {
        return new WriteOperation(async () => {
            this.logger.info(`permit.api.updateTenant(${JSON.stringify(tenant)})`);
            const data = {};
            data.name = tenant.name;
            if (tenant.description) {
                data.description = tenant.description;
            }
            return await this.client
                .patch(`cloud/tenants/${tenant.key}`, data)
                .then((response) => {
                return response.data;
            })
                .catch((error) => {
                this.logger.error(`tried to update tenant with key: ${tenant.key}, got error: ${error}`);
                throw error;
            });
        });
    }
    deleteTenant(tenantKey) {
        return new WriteOperation(async () => {
            this.logger.info(`permit.api.deleteTenant(${tenantKey})`);
            return await this.client
                .delete(`cloud/tenants/${tenantKey}`)
                .then((response) => {
                return { status: response.status };
            })
                .catch((error) => {
                this.logger.error(`tried to delete tenant with key: ${tenantKey}, got error: ${error}`);
                throw error;
            });
        });
    }
    // role mutations
    assignRole(userKey, roleKey, tenantKey) {
        return new WriteOperation(async () => {
            const data = {
                role: roleKey,
                user: userKey,
                scope: tenantKey,
            };
            this.logger.info(`permit.api.assignRole(${JSON.stringify(data)})`);
            return await this.client
                .post('cloud/role_assignments', data)
                .then((response) => {
                return response.data;
            })
                .catch((error) => {
                this.logger.error(`could not assign role ${roleKey} to ${userKey} in tenant ${tenantKey}, got error: ${error}`);
                throw error;
            });
        });
    }
    unassignRole(userKey, roleKey, tenantKey) {
        return new WriteOperation(async () => {
            const data = {
                role: roleKey,
                user: userKey,
                scope: tenantKey,
            };
            this.logger.info(`permit.api.assignRole(${JSON.stringify(data)})`);
            return await this.client
                .delete(`cloud/role_assignments?role=${roleKey}&user=${userKey}&scope=${tenantKey}`)
                .then((response) => {
                return response.data;
            })
                .catch((error) => {
                this.logger.error(`could not unassign role ${roleKey} of ${userKey} in tenant ${tenantKey}, got error: ${error}`);
                throw error;
            });
        });
    }
    // cloud api proxy ----------------------------------------------------------
    async read(...operations) {
        // reads do not need to be resolved in order
        return await Promise.all(operations.map((op) => op.run()));
    }
    async write(...operations) {
        const results = [];
        for (const op of operations) {
            const result = await op.run();
            results.push(result);
        }
        return results;
    }
    get api() {
        return {
            // read methods
            isUser: this.isUser.bind(this),
            getUser: this.getUser.bind(this),
            getUsers: this.getUsers.bind(this),
            getRole: this.getRole.bind(this),
            getRoles: this.getRoles.bind(this),
            getTenant: this.getTenant.bind(this),
            getTenants: this.getTenants.bind(this),
            getUserTenants: this.getUserTenants.bind(this),
            getResources: this.getResources.bind(this),
            getResource: this.getResource.bind(this),
            getActions: this.getActions.bind(this),
            getAction: this.getAction.bind(this),
            getCurrentOrganization: this.getCurrentOrganization.bind(this),
            getCurrentProject: this.getCurrentProject.bind(this),
            getCurrentEnvironment: this.getCurrentEnvironment.bind(this),
            // getLastUpdateFromServer: this.getLastUpdateFromServer.bind(this),
            // getUptime: this.getUptime.bind(this),
            getAssignedRoles: this.getAssignedRoles.bind(this),
            // write methods
            syncUser: this.syncUser.bind(this),
            createUser: this.createUser.bind(this),
            updateUser: this.updateUser.bind(this),
            deleteUser: this.deleteUser.bind(this),
            createTenant: this.createTenant.bind(this),
            updateTenant: this.updateTenant.bind(this),
            deleteTenant: this.deleteTenant.bind(this),
            createResource: this.createResource.bind(this),
            updateResource: this.updateResource.bind(this),
            deleteResource: this.deleteResource.bind(this),
            createAction: this.createAction.bind(this),
            updateAction: this.updateAction.bind(this),
            deleteAction: this.deleteAction.bind(this),
            createRole: this.createRole.bind(this),
            updateRole: this.updateRole.bind(this),
            deleteRole: this.deleteRole.bind(this),
            assignRole: this.assignRole.bind(this),
            unassignRole: this.unassignRole.bind(this),
        };
    }
    getMethods() {
        return {
            // read: this.read.bind(this),
            // write: this.write.bind(this),
            api: this.api,
        };
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL211dGF0aW9ucy9jbGllbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUF3QixNQUFNLE9BQU8sQ0FBQztBQW9CN0MsTUFBTSxPQUFPLGFBQWE7SUFDeEIsWUFBb0IsUUFBMEI7UUFBMUIsYUFBUSxHQUFSLFFBQVEsQ0FBa0I7SUFBRyxDQUFDO0lBRTNDLEtBQUssQ0FBQyxHQUFHO1FBQ2QsT0FBTyxNQUFNLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUMvQixDQUFDO0NBQ0Y7QUFFRCxNQUFNLE9BQU8sY0FBYztJQUN6QixZQUFvQixRQUEwQjtRQUExQixhQUFRLEdBQVIsUUFBUSxDQUFrQjtJQUFHLENBQUM7SUFFM0MsS0FBSyxDQUFDLEdBQUc7UUFDZCxPQUFPLE1BQU0sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQy9CLENBQUM7Q0FDRjtBQWtERCxNQUFNLE9BQU8sZUFBZTtJQUcxQixZQUFvQixNQUFxQixFQUFVLE1BQWM7UUFBN0MsV0FBTSxHQUFOLE1BQU0sQ0FBZTtRQUFVLFdBQU0sR0FBTixNQUFNLENBQVE7UUFGekQsV0FBTSxHQUFrQixLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7UUFHN0MsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDO1lBQ3pCLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHO1lBQ2pDLE9BQU8sRUFBRTtnQkFDUCxhQUFhLEVBQUUsVUFBVSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRTtnQkFDNUMsY0FBYyxFQUFFLGtCQUFrQjthQUNuQztTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCw2RUFBNkU7SUFDdEUsT0FBTyxDQUFDLE9BQWU7UUFDNUIsT0FBTyxJQUFJLGFBQWEsQ0FBQyxLQUFLLElBQUksRUFBRTtZQUNsQyxJQUFJ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