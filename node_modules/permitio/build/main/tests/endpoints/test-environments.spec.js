"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const ava_1 = __importDefault(require("ava"));
const index_1 = require("../../index");
const fixtures_1 = require("../fixtures");
const test = ava_1.default;
test.before(fixtures_1.provideTestExecutionContext);
const TEST_PROJECT_KEY = 'test-node-proj';
const CREATED_PROJECTS = [{ key: TEST_PROJECT_KEY, name: 'New Node Project' }];
const CREATED_ENVIRONMENTS = [
    { key: 'my-node-env', name: 'My Node Env' },
    { key: 'my-node-env-2', name: 'My Node Env 2' },
];
const permitWithOrgLevelApiKey = new index_1.Permit({
    token: process.env.ORG_PDP_API_KEY || process.env.PDP_API_KEY || '',
    pdp: process.env.PDP_URL || 'http://localhost:7766',
    apiUrl: process.env.PDP_CONTROL_PLANE || 'https://api.permit.io',
    log: {
        level: 'debug',
    },
});
const permitWithProjectLevelApiKey = new index_1.Permit({
    token: process.env.PROJECT_PDP_API_KEY || process.env.PDP_API_KEY || '',
    pdp: process.env.PDP_URL || 'http://localhost:7766',
    apiUrl: process.env.PDP_CONTROL_PLANE || 'https://api.permit.io',
    log: {
        level: 'debug',
    },
});
async function cleanup(permit, projectKey, t) {
    var _a;
    t.context.logger.info('Running cleanup...');
    for (const env of CREATED_ENVIRONMENTS) {
        try {
            await permit.api.environments.delete(projectKey, env.key);
        }
        catch (error) {
            if (error instanceof index_1.PermitApiError && ((_a = error.response) === null || _a === void 0 ? void 0 : _a.status) === 404) {
                t.context.logger.info(`SKIPPING delete, env does not exist: ${env.key}, project_key=${projectKey}`);
            }
        }
    }
    (0, fixtures_1.printBreak)();
}
test.serial('environment creation with org level api key', async (t) => {
    var _a, _b, _c;
    const permit = permitWithOrgLevelApiKey;
    t.context.logger.info(`token: ${permit.config.token}`);
    try {
        await permit.api.ensureAccessLevel(index_1.ApiKeyLevel.ORGANIZATION_LEVEL_API_KEY);
    }
    catch (error) {
        t.context.logger.warn('this test must run with an org level api key');
        return;
    }
    t.is(permit.config.apiContext.permittedAccessLevel, index_1.ApiKeyLevel.ORGANIZATION_LEVEL_API_KEY);
    try {
        await cleanup(permit, TEST_PROJECT_KEY, t);
        const projects = [];
        for (const projectData of CREATED_PROJECTS) {
            t.context.logger.info(`trying to creating project: ${projectData.key}`);
            try {
                let project;
                try {
                    project = await permit.api.projects.create(projectData);
                }
                catch (error) {
                    if (error instanceof index_1.PermitApiError && ((_a = error.response) === null || _a === void 0 ? void 0 : _a.status) === 409) {
                        t.context.logger.info(`SKIPPING create, project already exists: ${projectData.key}`);
                    }
                    project = await permit.api.projects.get(projectData.key);
                }
                projects.push(project);
                t.truthy(project);
                t.is(project.key, projectData.key);
                t.is(project.name, projectData.name);
                t.true(project.description == projectData.description); // will compare null and undefined as well
            }
            catch (error) {
                if (error instanceof index_1.PermitApiError) {
                    (0, fixtures_1.handleApiError)(error, 'Got API Error', t);
                }
                else if (error instanceof index_1.PermitConnectionError) {
                    throw error;
                }
                else {
                    t.context.logger.error(`Got error: ${error}`);
                    t.fail(`Got error: ${error}`);
                }
            }
        }
        (0, fixtures_1.printBreak)();
        const environmentsOriginal = await permit.api.environments.list({
            projectKey: (_b = projects[0]) === null || _b === void 0 ? void 0 : _b.key,
        });
        const originalNumOfEnvs = environmentsOriginal.length;
        for (const environmentData of CREATED_ENVIRONMENTS) {
            t.context.logger.info(`creating environment: ${environmentData.key}`);
            const environment = await permit.api.environments.create(projects[0].key, environmentData);
            t.truthy(environment);
            t.is(environment.key, environmentData.key);
            t.is(environment.name, environmentData.name);
            t.true(environment.description == environmentData.description); // will compare null and undefined as well
            t.is(environment.project_id, projects[0].id);
        }
        (0, fixtures_1.printBreak)();
        const environments = await permit.api.environments.list({ projectKey: (_c = projects[0]) === null || _c === void 0 ? void 0 : _c.key });
        t.context.logger.info(`environments: ${environments.map((e) => e.key)}`);
        t.is(environments.length, CREATED_ENVIRONMENTS.length + originalNumOfEnvs); // each project has 2 default `dev` and `prod` environments
        const testEnvironment = await permit.api.environments.get(TEST_PROJECT_KEY, CREATED_ENVIRONMENTS[0].key);
        t.truthy(testEnvironment);
        t.is(testEnvironment.key, CREATED_ENVIRONMENTS[0].key);
        t.is(testEnvironment.name, CREATED_ENVIRONMENTS[0].name);
        t.true(testEnvironment.description == CREATED_ENVIRONMENTS[0].description); // will compare null and undefined as well
    }
    catch (error) {
        t.context.logger.error(`Got error: ${error}`);
        t.fail(`Got error: ${error}`);
    }
    finally {
        (0, fixtures_1.printBreak)();
        await cleanup(permit, TEST_PROJECT_KEY, t);
    }
});
test.serial('environment creation with project level api key', async (t) => {
    const permit = permitWithProjectLevelApiKey;
    try {
        await permit.api.ensureAccessLevel(index_1.ApiKeyLevel.PROJECT_LEVEL_API_KEY);
    }
    catch (error) {
        t.context.logger.warn('this test must run with a project level api key');
        return;
    }
    t.is(permit.config.apiContext.permittedAccessLevel, index_1.ApiKeyLevel.PROJECT_LEVEL_API_KEY);
    try {
        const project = permit.config.apiContext.project;
        t.truthy(project);
        const projectId = String(project);
        const projectRead = await permit.api.projects.get(projectId);
        t.is(String(projectRead.id), projectId);
        await cleanup(permit, projectRead.key, t);
        for (const environmentData of CREATED_ENVIRONMENTS) {
            t.context.logger.info(`creating environment: ${environmentData.key}`);
            const environment = await permit.api.environments.create(projectRead.key, environmentData);
            t.truthy(environment);
            t.is(environment.key, environmentData.key);
            t.is(environment.name, environmentData.name);
            t.true(environment.description == environmentData.description); // will compare null and undefined as well
            t.is(environment.project_id, projectRead.id);
        }
        const environments = await permit.api.environments.list({ projectKey: projectRead === null || projectRead === void 0 ? void 0 : projectRead.key });
        const actualEnvSet = environments.map((env) => env.key);
        const createdEnvSet = new Set(CREATED_ENVIRONMENTS.map((env) => env.key));
        const intersection = new Set(actualEnvSet.filter((x) => createdEnvSet.has(x)));
        t.is(intersection.size, 2);
    }
    catch (error) {
        if (error instanceof index_1.PermitApiError) {
            (0, fixtures_1.handleApiError)(error, 'Got API Error', t);
        }
        else if (error instanceof index_1.PermitConnectionError) {
            throw error;
        }
        else {
            t.context.logger.error(`Got error: ${error}`);
            t.fail(`Got error: ${error}`);
        }
    }
    finally {
        await cleanup(permit, TEST_PROJECT_KEY, t);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC1lbnZpcm9ubWVudHMuc3BlYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy90ZXN0cy9lbmRwb2ludHMvdGVzdC1lbnZpcm9ubWVudHMuc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLDhDQUErRDtBQUUvRCx1Q0FTcUI7QUFDckIsMENBQW1HO0FBRW5HLE1BQU0sSUFBSSxHQUFHLGFBQXFDLENBQUM7QUFDbkQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxzQ0FBMkIsQ0FBQyxDQUFDO0FBRXpDLE1BQU0sZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7QUFDMUMsTUFBTSxnQkFBZ0IsR0FBb0IsQ0FBQyxFQUFFLEdBQUcsRUFBRSxnQkFBZ0IsRUFBRSxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDO0FBQ2hHLE1BQU0sb0JBQW9CLEdBQXdCO0lBQ2hELEVBQUUsR0FBRyxFQUFFLGFBQWEsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFO0lBQzNDLEVBQUUsR0FBRyxFQUFFLGVBQWUsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFO0NBQ2hELENBQUM7QUFFRixNQUFNLHdCQUF3QixHQUFHLElBQUksY0FBTSxDQUFDO0lBQzFDLEtBQUssRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsSUFBSSxFQUFFO0lBQ25FLEdBQUcsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sSUFBSSx1QkFBdUI7SUFDbkQsTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLElBQUksdUJBQXVCO0lBQ2hFLEdBQUcsRUFBRTtRQUNILEtBQUssRUFBRSxPQUFPO0tBQ2Y7Q0FDRixDQUFDLENBQUM7QUFFSCxNQUFNLDRCQUE0QixHQUFHLElBQUksY0FBTSxDQUFDO0lBQzlDLEtBQUssRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxJQUFJLEVBQUU7SUFDdkUsR0FBRyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxJQUFJLHVCQUF1QjtJQUNuRCxNQUFNLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsSUFBSSx1QkFBdUI7SUFDaEUsR0FBRyxFQUFFO1FBQ0gsS0FBSyxFQUFFLE9BQU87S0FDZjtDQUNGLENBQUMsQ0FBQztBQUVILEtBQUssVUFBVSxPQUFPLENBQUMsTUFBYyxFQUFFLFVBQWtCLEVBQUUsQ0FBZ0M7O0lBQ3pGLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0lBQzVDLEtBQUssTUFBTSxHQUFHLElBQUksb0JBQW9CLEVBQUU7UUFDdEMsSUFBSTtZQUNGLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDM0Q7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLElBQUksS0FBSyxZQUFZLHNCQUFjLElBQUksQ0FBQSxNQUFBLEtBQUssQ0FBQyxRQUFRLDBDQUFFLE1BQU0sTUFBSyxHQUFHLEVBQUU7Z0JBQ3JFLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FDbkIsd0NBQXdDLEdBQUcsQ0FBQyxHQUFHLGlCQUFpQixVQUFVLEVBQUUsQ0FDN0UsQ0FBQzthQUNIO1NBQ0Y7S0FDRjtJQUNELElBQUEscUJBQVUsR0FBRSxDQUFDO0FBQ2YsQ0FBQztBQUVELElBQUksQ0FBQyxNQUFNLENBQUMsNkNBQTZDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFOztJQUNyRSxNQUFNLE1BQU0sR0FBRyx3QkFBd0IsQ0FBQztJQUN4QyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7SUFFdkQsSUFBSTtRQUNGLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxtQkFBVyxDQUFDLDBCQUEwQixDQUFDLENBQUM7S0FDNUU7SUFBQyxPQUFPLEtBQUssRUFBRTtRQUNkLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyw4Q0FBOEMsQ0FBQyxDQUFDO1FBQ3RFLE9BQU87S0FDUjtJQUNELENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLEVBQUUsbUJBQVcsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0lBRTVGLElBQUk7UUFDRixNQUFNLE9BQU8sQ0FBQyxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDM0MsTUFBTSxRQUFRLEdBQWtCLEVBQUUsQ0FBQztRQUNuQyxLQUFLLE1BQU0sV0FBVyxJQUFJLGdCQUFnQixFQUFFO1lBQzFDLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQywrQkFBK0IsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDeEUsSUFBSTtnQkFDRixJQUFJLE9BQW9CLENBQUM7Z0JBQ3pCLElBQUk7b0JBQ0YsT0FBTyxHQUFHLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO2lCQUN6RDtnQkFBQyxPQUFPLEtBQUssRUFBRTtvQkFDZCxJQUFJLEtBQUssWUFBWSxzQkFBYyxJQUFJLENBQUEsTUFBQSxLQUFLLENBQUMsUUFBUSwwQ0FBRSxNQUFNLE1BQUssR0FBRyxFQUFFO3dCQUNyRSxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsNENBQTRDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO3FCQUN0RjtvQkFDRCxPQUFPLEdBQUcsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2lCQUMxRDtnQkFDRCxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUN2QixDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNsQixDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNuQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNyQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLElBQUksV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsMENBQTBDO2FBQ25HO1lBQUMsT0FBTyxLQUFLLEVBQUU7Z0JBQ2QsSUFBSSxLQUFLLFlBQVksc0JBQWMsRUFBRTtvQkFDbkMsSUFBQSx5QkFBYyxFQUFDLEtBQUssRUFBRSxlQUFlLEVBQUUsQ0FBQyxDQUFDLENBQUM7aUJBQzNDO3FCQUFNLElBQUksS0FBSyxZQUFZLDZCQUFxQixFQUFFO29CQUNqRCxNQUFNLEtBQUssQ0FBQztpQkFDYjtxQkFBTTtvQkFDTCxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsY0FBYyxLQUFLLEVBQUUsQ0FBQyxDQUFDO29CQUM5QyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsS0FBSyxFQUFFLENBQUMsQ0FBQztpQkFDL0I7YUFDRjtTQUNGO1FBRUQsSUFBQSxxQkFBVSxHQUFFLENBQUM7UUFFYixNQUFNLG9CQUFvQixHQUFHLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDO1lBQzlELFVBQVUsRUFBRSxNQUFBLFFBQVEsQ0FBQyxDQUFDLENBQUMsMENBQUUsR0FBRztTQUM3QixDQUFDLENBQUM7UUFDSCxNQUFNLGlCQUFpQixHQUFHLG9CQUFvQixDQUFDLE1BQU0sQ0FBQztRQUV0RCxLQUFLLE1BQU0sZUFBZSxJQUFJLG9CQUFvQixFQUFFO1lBQ2xELENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyx5QkFBeUIsZUFBZSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDdEUsTUFBTSxXQUFXLEdBQW9CLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUN2RSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUNmLGVBQWUsQ0FDaEIsQ0FBQztZQUNGLENBQUMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDdEIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUMzQyxDQUFDLENBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzdDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsSUFBSSxlQUFlLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQywwQ0FBMEM7WUFDMUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUM5QztRQUVELElBQUEscUJBQVUsR0FBRSxDQUFDO1FBRWIsTUFBTSxZQUFZLEdBQUcsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxVQUFVLEVBQUUsTUFBQSxRQUFRLENBQUMsQ0FBQyxDQUFDLDBDQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDMUYsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3pFLENBQUMsQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxvQkFBb0IsQ0FBQyxNQUFNLEdBQUcsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLDJEQUEyRDtRQUV2SSxNQUFNLGVBQWUsR0FBRyxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FDdkQsZ0JBQWdCLEVBQ2hCLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FDNUIsQ0FBQztRQUVGLENBQUMsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDMUIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxlQUFlLENBQUMsR0FBRyxFQUFFLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZELENBQUMsQ0FBQyxFQUFFLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6RCxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLElBQUksb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQywwQ0FBMEM7S0FDdkg7SUFBQyxPQUFPLEtBQUssRUFBRTtRQUNkLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxjQUFjLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDOUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLEtBQUssRUFBRSxDQUFDLENBQUM7S0FDL0I7WUFBUztRQUNSLElBQUEscUJBQVUsR0FBRSxDQUFDO1FBQ2IsTUFBTSxPQUFPLENBQUMsTUFBTSxFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQzVDO0FBQ0gsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFJLENBQUMsTUFBTSxDQUFDLGlEQUFpRCxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRTtJQUN6RSxNQUFNLE1BQU0sR0FBRyw0QkFBNEIsQ0FBQztJQUU1QyxJQUFJO1FBQ0YsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLG1CQUFXLENBQUMscUJBQXFCLENBQUMsQ0FBQztLQUN2RTtJQUFDLE9BQU8sS0FBSyxFQUFFO1FBQ2QsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGlEQUFpRCxDQUFDLENBQUM7UUFDekUsT0FBTztLQUNSO0lBQ0QsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsRUFBRSxtQkFBVyxDQUFDLHFCQUFxQixDQUFDLENBQUM7SUFFdkYsSUFBSTtRQUNGLE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQztRQUNqRCxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xCLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUVsQyxNQUFNLFdBQVcsR0FBRyxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM3RCxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFFeEMsTUFBTSxPQUFPLENBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFMUMsS0FBSyxNQUFNLGVBQWUsSUFBSSxvQkFBb0IsRUFBRTtZQUNsRCxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMseUJBQXlCLGVBQWUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ3RFLE1BQU0sV0FBVyxHQUFvQixNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FDdkUsV0FBVyxDQUFDLEdBQUcsRUFDZixlQUFlLENBQ2hCLENBQUM7WUFDRixDQUFDLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3RCLENBQUMsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDM0MsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM3QyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLElBQUksZUFBZSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsMENBQTBDO1lBQzFHLENBQUMsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDOUM7UUFFRCxNQUFNLFlBQVksR0FBRyxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFLFVBQVUsRUFBRSxXQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUMxRixNQUFNLFlBQVksR0FBRyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDeEQsTUFBTSxhQUFhLEdBQUcsSUFBSSxHQUFHLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMxRSxNQUFNLFlBQVksR0FBRyxJQUFJLEdBQUcsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRSxDQUFDLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDNUI7SUFBQyxPQUFPLEtBQUssRUFBRTtRQUNkLElBQUksS0FBSyxZQUFZLHNCQUFjLEVBQUU7WUFDbkMsSUFBQSx5QkFBYyxFQUFDLEtBQUssRUFBRSxlQUFlLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDM0M7YUFBTSxJQUFJLEtBQUssWUFBWSw2QkFBcUIsRUFBRTtZQUNqRCxNQUFNLEtBQUssQ0FBQztTQUNiO2FBQU07WUFDTCxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsY0FBYyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1lBQzlDLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1NBQy9CO0tBQ0Y7WUFBUztRQUNSLE1BQU0sT0FBTyxDQUFDLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxDQUFDLENBQUMsQ0FBQztLQUM1QztBQUNILENBQUMsQ0FBQyxDQUFDIn0=